function upload(){var t=new FileReader;t.onload=function(t){var e=new Image;e.src=t.target.result;var n=document.createElement("canvas");$(".img-container").append(n),n.width=e.width,n.height=e.height;var a=n.getContext("2d");a.drawImage(e,0,0)},t.readAsDataURL(document.getElementById("userImage").files[0])}function getCanvasImgData(t){console.log("check");var e=document.getElementsByTagName("canvas")[0].getContext("2d"),n=e.getImageData(0,0,t.width(),t.height()),a=n.data;return a}function arrayToString(t){for(var e="",n=0;n<t.length;n+=4)e+=String.fromCharCode(t[n])+String.fromCharCode(t[n+1])+String.fromCharCode(t[n+2]);return e}function stringToBase64(t){var e=window.btoa(t);return e}function base64ToString(t){var e=window.atob(t);return e}function stringToArray(t){for(var e=[],n=0;n<t.length;n++)0!=n&&n%4===0&&e.push(255),e.push(t.charCodeAt(n));return e}$(document).on("ready",function(){$("label").click(function(){$("input:file").click()}).show(),$("input:file").change(function(){var t=$(this).val();upload(t),$(".encrypt-btn").toggle(),$("body").animate({scrollTop:$("div.img-container").offset().top},500)}),$(".encrypt-btn").on("click",function(){$("#pw-form").toggle(),$("#show-form").toggle(),$("body").animate({scrollTop:$("#pw-form").offset().top},500)}),$("form").on("submit",function(t){t.preventDefault();var e=$(".encrypt-pw").val(),n=getCanvasImgData($("canvas")),a=arrayToString(n),r=CryptoJS.AES.encrypt(a,e),o=stringToBase64(r);localStorage.setItem("encodedImage",o);var i=CryptoJS.AES.decrypt(r,e),c=i.toString(CryptoJS.enc.Utf8),n=stringToArray(c)})});