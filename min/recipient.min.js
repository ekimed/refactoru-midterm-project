function drawNewImg(e,t,a){var r=document.createElement("canvas");r.setAttribute("id","new-canvas"),r.width=t,r.height=a;var n=r.getContext("2d"),o=n.getImageData(0,0,t,a);return o.data.set(new Uint8ClampedArray(e)),n.putImageData(o,0,0),r}$(document).on("ready",function(){if(""!=window.location.hash){$("#sender").toggle(),$("#recipient").toggle();var e=window.location.hash.substr(1),t=localStorage.getItem(e),a=JSON.parse(t),r=a.encryptedData,n=a.width,o=a.height;$("#re-pw-form").on("submit",function(e){e.preventDefault();var t=$("#re-pw").val(),a=CryptoJS.AES.decrypt(r,t),i=a.toString(CryptoJS.enc.Utf8),d=stringToArray(i),g=drawNewImg(d,n,o);$(g).hide().appendTo(".decrypted-img").fadeIn(1e3),$("#re-pw-form").toggle()})}});